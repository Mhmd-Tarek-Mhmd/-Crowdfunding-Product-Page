const $=document.querySelector.bind(document),$$=document.querySelectorAll.bind(document);!function(){const t={currentPlan:null,plans:[{title:"Bamboo Stand",price:25,left:101},{title:"Black Edition Stand",price:75,left:64},{title:"Mahogany Special Edition",price:200,left:0}]},i={getCurrentPlan:()=>t.currentPlan,setCurrentPlan:e=>t.currentPlan=e,planLeft:function(){this.getCurrentPlan().left},purchase:function(e){this.setCurrentPlan(e),this.planLeft(),a.render()},init:function(){a.init()}},a={init:function(){function t(e){$$("#modal-default .box").forEach(e=>e.classList.remove("selected")),i.setCurrentPlan(e),$(`#modal-default .${e}`).classList.add("selected"),$(`.${e} input[type=radio]`).checked="checked"}$$("#main-boxes .box").forEach(e=>{e.addEventListener("click",e=>{"button"===e.target.tagName.toLowerCase()&&(t(e=e.target.parentElement.parentElement.classList[1]),o.showModal("#modal-default"),$(`#modal-default .${e}`).scrollIntoView())})}),$$("#modal-default .box").forEach(e=>{e.addEventListener("focus",e=>t(e.target.classList[1])),e.addEventListener("click",e=>{"input"===e.target.tagName.toLowerCase()&&"submit"===e.target.type.toLowerCase()&&(e.preventDefault(),i.purchase(i.getCurrentPlan()),o.hideModal("#modal-default"),o.showModal("#modal-completed"))})}),$("#modal-completed button").onclick=()=>o.hideModal("#modal-completed"),$("#modal-default .close-modal").onclick=()=>o.hideModal("#modal-default"),$(".modals").onkeyup=e=>{27==e.keyCode&&(o.hideModal("#modal-default"),o.hideModal("#modal-completed"))},$(".header .bookmark").onclick=e=>{e.target.classList.toggle("bookmarked"),$(".header .bookmark #label").textContent=e.target.classList.contains("bookmarked")?"Bookmarked":"Bookmark"},$("nav button").onclick=function(){const t=$("nav button img"),a=["assets/images/icon-hamburger.svg","assets/images/icon-close-menu.svg"];$("body").classList.toggle("has-modal"),$("nav .mobile-links").classList.toggle("mobile-hide"),t.src=t.src.includes(a[0])?a[1]:a[0],$("nav").classList.toggle("has-modal"),null!==$("nav.has-modal")&&(o.trapFocus($("nav.has-modal")),$("nav.has-modal").onkeyup=e=>{27==e.keyCode&&($("body").classList.remove("has-modal"),$("nav .mobile-links").classList.add("mobile-hide"),t.src=a[0])})}},render:function(){const a=i.getCurrentPlan(),e=$(".stats .total-backers");var t=parseFloat(e.textContent.replace(",",""));if(t++,e.textContent=(t/1e3).toFixed(3).replace(".",","),"no-reward"!=a){const n=$$(`.${a} .left`);n.forEach(e=>{var t=parseInt(e.firstElementChild.textContent);0==(e.firstElementChild.textContent=--t)&&$$(`.${a}`).forEach(e=>e.classList.add("out-of-stock"))});const l=$(".stats .backed span"),s=Intl.NumberFormat("en-Us");var o=$(`#modal-default .${a} input[type=number]`).value,t=parseFloat(l.textContent.replace(",",""));t+=parseInt(o),l.textContent=s.format(t);const d=$(".stats .progress-bar span");d.style.width=`${t/1e3}%`}}},o={show:function(e){$(e).classList.remove("hide")},hide:function(e){$(e).classList.add("hide")},showModal:function(e){$("body").classList.add("has-modal"),this.show(e),$(e).firstElementChild.focus(),$(e).firstElementChild.ariaHidden=!1,this.trapFocus($(e).firstElementChild)},hideModal:function(e){$("body").classList.remove("has-modal"),this.hide(e),$(e).firstElementChild.blur(),$(e).firstElementChild.ariaHidden=!0},trapFocus:function(e){var t=e.querySelectorAll('a[href]:not([disabled]), input:not([disabled]), button:not([disabled]), *[tabindex="0"]');const a=t[0],o=t[t.length-1];e.addEventListener("keydown",function(e){"Tab"!==e.key&&9!==e.keyCode||(e.shiftKey?document.activeElement===a&&(o.focus(),e.preventDefault()):document.activeElement===o&&(a.focus(),e.preventDefault()))})}};i.init()}();