"use strict";var $=document.querySelector.bind(document),$$=document.querySelectorAll.bind(document);!function(){var e={currentPlan:null,plans:[{title:"Bamboo Stand",price:25,left:101},{title:"Black Edition Stand",price:75,left:64},{title:"Mahogany Special Edition",price:200,left:0}]},l={getCurrentPlan:function(){return e.currentPlan},setCurrentPlan:function(t){return e.currentPlan=t},planLeft:function(){this.getCurrentPlan().left},purchase:function(t){this.setCurrentPlan(t),this.planLeft(),n.render()},init:function(){n.init()}},n={init:function(){function e(t){$$("#modal-default .box").forEach(function(t){return t.classList.remove("selected")}),l.setCurrentPlan(t),$("#modal-default .".concat(t)).classList.add("selected"),$(".".concat(t," input[type=radio]")).checked="checked"}$$("#main-boxes .box").forEach(function(t){t.addEventListener("click",function(t){"button"===t.target.tagName.toLowerCase()&&(e(t=t.target.parentElement.parentElement.classList[1]),a.showModal("#modal-default"),$("#modal-default .".concat(t)).scrollIntoView())})}),$$("#modal-default .box").forEach(function(t){t.addEventListener("focus",function(t){return e(t.target.classList[1])}),t.addEventListener("click",function(t){"input"===t.target.tagName.toLowerCase()&&"submit"===t.target.type.toLowerCase()&&(t.preventDefault(),l.purchase(l.getCurrentPlan()),a.hideModal("#modal-default"),a.showModal("#modal-completed"))})}),$("#modal-completed button").onclick=function(){return a.hideModal("#modal-completed")},$("#modal-default .close-modal").onclick=function(){return a.hideModal("#modal-default")},$(".modals").onkeyup=function(t){27==t.keyCode&&(a.hideModal("#modal-default"),a.hideModal("#modal-completed"))},$(".header .bookmark").onclick=function(t){t.target.classList.toggle("bookmarked"),$(".header .bookmark #label").textContent=t.target.classList.contains("bookmarked")?"Bookmarked":"Bookmark"},$("nav button").onclick=function(){var e=$("nav button img"),n=["images/icon-hamburger.svg","images/icon-close-menu.svg"];$("body").classList.toggle("has-modal"),$("nav .mobile-links").classList.toggle("mobile-hide"),e.src=e.src.includes(n[0])?n[1]:n[0],$("nav").classList.toggle("has-modal"),null!==$("nav.has-modal")&&(a.trapFocus($("nav.has-modal")),$("nav.has-modal").onkeyup=function(t){27==t.keyCode&&($("body").classList.remove("has-modal"),$("nav .mobile-links").classList.add("mobile-hide"),e.src=n[0])})}},render:function(){var t,e,n=l.getCurrentPlan(),a=$(".stats .total-backers"),o=parseFloat(a.textContent.replace(",",""));a.textContent=(++o/1e3).toFixed(3).replace(".",","),"no-reward"!=n&&($$(".".concat(n," .left")).forEach(function(t){var e=parseInt(t.firstElementChild.textContent);0==(t.firstElementChild.textContent=--e)&&$$(".".concat(n)).forEach(function(t){return t.classList.add("out-of-stock")})}),t=$(".stats .backed span"),e=Intl.NumberFormat("en-Us"),a=$("#modal-default .".concat(n," input[type=number]")).value,o=parseFloat(t.textContent.replace(",","")),o+=parseInt(a),t.textContent=e.format(o),$(".stats .progress-bar span").style.width="".concat(o/1e3,"%"))}},a={show:function(t){$(t).classList.remove("hide")},hide:function(t){$(t).classList.add("hide")},showModal:function(t){$("body").classList.add("has-modal"),this.show(t),$(t).firstElementChild.focus(),$(t).firstElementChild.ariaHidden=!1,this.trapFocus($(t).firstElementChild)},hideModal:function(t){$("body").classList.remove("has-modal"),this.hide(t),$(t).firstElementChild.blur(),$(t).firstElementChild.ariaHidden=!0},trapFocus:function(t){var e=t.querySelectorAll('a[href]:not([disabled]), input:not([disabled]), button:not([disabled]), *[tabindex="0"]'),n=e[0],a=e[e.length-1];t.addEventListener("keydown",function(t){"Tab"!==t.key&&9!==t.keyCode||(t.shiftKey?document.activeElement===n&&(a.focus(),t.preventDefault()):document.activeElement===a&&(n.focus(),t.preventDefault()))})}};l.init()}();